<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>DataClinic - Polygen Research</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    
    <link rel="stylesheet" th:href="@{/css/styles.css}" />
</head>
<body class="">

    <div id="app-wrapper">
        
        <aside id="sidebar" th:fragment="sidebar">
            <div class="sidebar-header">
                <i class="ph-bold ph-first-aid-kit"></i>
                <h1>Polygen Research - SilkCorp</h1>
            </div>
            <nav>
                <ul>
                    <li><a th:href="@{/inicio}" class="nav-link"><i class="ph-bold ph-house"></i> Inicio (Pacientes)</a></li>
                    <!-- <li><a th:href="@{/crfs/list}" class="nav-link"><i class="ph-bold ph-clipboard-text"></i> Gestión de CRFs</a></li> !-->
                    <li><a th:href="@{/campos/list}" class="nav-link"><i class="ph-bold ph-pencil-simple"></i> Gestión de Campos</a></li>
                    <li><a th:href="@{/datos-crf/list}" class="nav-link"><i class="ph-bold ph-chart-line"></i> Ver Datos (Valores)</a></li>
                    <li><a th:href="@{/usuarios/list}" class="nav-link"><i class="ph-bold ph-user-gear"></i> Adm. Usuarios</a></li>
                    <li><a th:href="@{/roles/list}" class="nav-link"><i class="ph-bold ph-identification-badge"></i> Adm. Roles</a></li>
                    <li><a th:href="@{/whitelist/list}" class="nav-link"><i class="ph-bold ph-shield-check"></i> Adm. Credenciales</a></li>
                    <li><a th:href="@{/registros/list}" class="nav-link"><i class="ph-bold ph-archive"></i> Logs de Actividad</a></li>
                </ul>
            </nav>
            <div class="sidebar-footer">
                <p><i class="ph-fill ph-lock-simple"></i> Conexión Segura (Cifrado)</p>
            </div>
        </aside>

        <main id="main-content">
            
            <header id="app-header" th:fragment="header">
                 <div class="header-left">
                     <button class="menu-toggle" onclick="toggleMenu()">
                         <i class="ph-bold ph-list"></i>
                     </button>
                     <button onclick="alert('Función DESHACER (simulada)')" title="Deshacer"  ><i class="ph-bold ph-arrow-counter-clockwise"></i></button>
                     <button onclick="alert('Función REHACER (simulada)')" title="Rehacer"><i class="ph-bold ph-arrow-clockwise"></i></button>
                     <span id="save-status"><i class="ph-fill ph-check-circle"></i> Autoguardado...</span>
                 </div>
                 <div class="header-right">
                    <button class="icon-btn" onclick="mostrarNotificaciones()" title="Notificaciones">
                        <i class="ph-bold ph-bell"></i>
                        <span class="notification-dot"></span>
                    </button>
                    <div class="profile-menu">
                     <img src="https://i.pravatar.cc/150?img=12" alt="Avatar">
                     <span th:text="${#authentication.principal.nombreUsuario}">Nombre del Usuario</span> 
                 </div>
                 </div>
            </header>

            <div id="page-container">
                
                <div th:replace="~{this :: contenido}">
                    <p>El contenido de la página va aquí...</p>
                </div>

            </div>

        </main>
    </div>

    <script th:src="@{/js/app-logic.js}"></script>

    <div id="modal-ver-paciente" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modal-patient-id">Detalles del Paciente</h2>
          <span class="close-modal" onclick="cerrarModal()">&times;</span>
        </div>
        <div class="modal-body">
          <div class="patient-data-grid">
            <strong>Código:</strong> <span id="modal-pac-codigo"></span>
            <strong>Nombre:</strong> <span id="modal-pac-nombre"></span>
            <strong>Apellido:</strong> <span id="modal-pac-apellido"></span>
            <strong>Estado:</strong> <span id="modal-pac-estado"></span>
            <strong>Número:</strong> <span>(Añadir ID y JS si es necesario)</span>
            <strong>Dirección:</strong> <span>(Añadir ID y JS si es necesario)</span>
          </div>
        </div>
      </div>
    </div>

    <div id="modal-ver-crf" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modal-crf-titulo">Detalles del CRF</h2>
          <span class="close-modal" onclick="cerrarModalCrf()">&times;</span>
        </div>
        <div class="modal-body">
           <div class="patient-data-grid"> <strong>ID CRF:</strong> <span id="modal-crf-id"></span>
            <strong>Paciente (Código):</strong> <span id="modal-crf-paciente"></span>
            <strong>Grupo:</strong> <span id="modal-crf-grupo"></span>
            <strong>Fecha Consulta:</strong> <span id="modal-crf-fecha"></span>
            <strong>Estado:</strong> <span id="modal-crf-estado"></span>
            <strong>Observación:</strong> <span id="modal-crf-obs"></span>
          </div>
        </div>
      </div>
    </div>
    <script th:src="@{/js/app-logic.js}"></script>
</body>
</html>